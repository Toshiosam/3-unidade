<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HashQuest</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="intro-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-title">ğŸ“š HashQuest: LaboratÃ³rio de Dados</div>
            
            <div class="intro-section">
                <div class="intro-header">Contexto Real</div>
                <p class="intro-p">
                    Grandes sistemas (como Bancos de Dados e Motores de Busca) precisam armazenar e recuperar informaÃ§Ãµes instantaneamente. 
                    Para isso, utilizam <strong>Tabelas de DispersÃ£o (Hash Tables)</strong>.
                </p>
            </div>

            <div class="intro-highlight">
                ğŸ› ï¸ <strong>O OBJETIVO:</strong> Esta ferramenta permite visualizar como diferentes algoritmos matemÃ¡ticos resolvem o problema da <strong>ColisÃ£o</strong> (quando dois itens disputam o mesmo espaÃ§o).
            </div>

            <div class="intro-section">
                <div class="intro-header">Roteiro de Uso:</div>
                <div class="intro-step"><span class="intro-icon">1ï¸âƒ£</span><span>Use o <strong>Switch</strong> para escolher entre LaboratÃ³rio ou Desafio.</span></div>
                <div class="intro-step"><span class="intro-icon">2ï¸âƒ£</span><span>Adicione um <strong>Lote de Dados</strong>.</span></div>
                <div class="intro-step"><span class="intro-icon">3ï¸âƒ£</span><span>Analise a eficiÃªncia no <strong>RelatÃ³rio</strong>.</span></div>
            </div>
            
            <button class="btn-start" id="btnStartIntro">INICIAR SIMULAÃ‡ÃƒO</button>
        </div>
    </div>

    <div id="report-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-title">ğŸ“„ RelatÃ³rio de EficiÃªncia</div>
            <div class="modal-subtitle">Dados da SessÃ£o Atual</div>
            
            <div class="report-row"><span>Algoritmo:</span> <span class="report-val" id="rep-algo">-</span></div>
            <div class="report-row"><span>Itens Inseridos:</span> <span class="report-val" id="rep-items">0</span></div>
            <div class="report-row"><span>Total de ColisÃµes:</span> <span class="report-val" id="rep-col" style="color:#ffca28">0</span></div>
            
            <div class="efficiency-box">
                <div style="font-size: 10px; color:#aaa;">DIAGNÃ“STICO</div>
                <div class="eff-score" id="rep-score">-</div>
                <div style="font-size: 11px; color:#666; margin-top:5px;" id="rep-desc"></div>
            </div>
            <button class="btn-close-rep" id="btnCloseReport">Fechar RelatÃ³rio</button>
        </div>
    </div>

    <div id="left-sidebar">
        <h2>
            ğŸ”® GRIMÃ“RIO
            <button class="help-btn" id="btnHelp" title="Ver InstruÃ§Ãµes">?</button>
        </h2>

        <div class="mode-switch-container sandbox" id="modeSwitch">
            <div class="mode-slider"></div>
            <div class="mode-option opt-sb">ğŸ§ª Lab</div>
            <div class="mode-option opt-qs">âš”ï¸ Quest</div>
        </div>
        
        <div class="control-group">
            <label>ğŸ“œ FeitiÃ§o (Algoritmo)</label>
            <select id="algoSelect">
                <option value="" disabled selected>-- SELECIONE --</option>
                <option value="CHAINING">Encadeamento (Listas)</option>
                <option value="LINEAR">Sondagem Linear (+1)</option>
                <option value="QUADRATIC">Sondagem QuadrÃ¡tica (+iÂ²)</option>
                <option value="DOUBLE">Hash Duplo (H2)</option>
            </select>
        </div>

        <div id="controls-lab">
            <div class="control-group">
                <label>ğŸ§ª LaboratÃ³rio</label>
                <button id="btnBatch" class="btn-batch" disabled>ğŸ² Adicionar Lote (10 Itens)</button>
                <button id="btnReport" class="btn-report" disabled>ğŸ“„ Ver RelatÃ³rio Atual</button>
            </div>
            <div class="control-group">
                <label>âš¡ Ajustes</label>
                <button id="btnAddSingle" disabled>â• Add 1 Item Avulso</button>
                <button id="btnCollision" class="btn-collision" disabled>ğŸ’¥ Gerar ColisÃ£o ForÃ§ada</button>
                <button id="btnUndo" class="btn-undo" disabled>â†©ï¸ Desfazer Ãšltimo</button>
                <button id="btnClear" class="btn-clear">ğŸ—‘ï¸ Limpar Mesa</button>
            </div>
        </div>

        <div id="controls-quest" class="hidden">
            <div class="control-group">
                <label>âš”ï¸ Desafios</label>
                <button id="btnNewQuest" class="btn-quest">ğŸ“œ Pegar Nova MissÃ£o</button>
                <button id="btnTestQuest" class="btn-test" disabled>ğŸ‘€ Testar HipÃ³tese (Ver)</button>
            </div>
            <div class="control-group">
                <label>Sua Resposta:</label>
                <div id="quest-options-container">
                    <div style="font-size:11px; color:#666; text-align:center; padding:10px; border:1px dashed #444;">
                        Inicie uma missÃ£o para ver as opÃ§Ãµes.
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div id="game-container">
        <canvas id="gameCanvas" width="900" height="700"></canvas>
    </div>

    <div id="right-sidebar">
        
        <div id="content-lab">
            <div class="stats-box">
                <div class="stat-row"><span>Tamanho (N):</span> <span id="statSize" class="stat-val">10</span></div>
                <div class="stat-row"><span>Ocupados:</span> <span id="statItems" class="stat-val">0</span></div>
                <div class="stat-row"><span>Fator de Carga:</span> <span id="statLoad" class="stat-val">0.00</span></div>
                <div class="progress-bg"><div id="loadBar" class="progress-fill"></div></div>
                <div style="text-align: center; font-size: 10px; color: #666; margin-top: 5px;">Expande se > 0.7</div>
            </div>

            <div class="legend-box">
                <strong>ğŸ”¬ COMO UTILIZAR:</strong><br>
                1. Selecione um <strong>Algoritmo</strong>.<br>
                2. Adicione um <strong>Lote</strong> e observe.<br>
                3. Abra o <strong>RelatÃ³rio</strong> manualmente.<br>
                4. Troque o algoritmo (os dados persistem).<br>
                5. Use <strong>Repetir Lote</strong> (automÃ¡tico) para comparar.
            </div>

            <div id="log-header">ğŸ“ REGISTRO DE CÃLCULO</div>
            <div id="log-content">
                <div style="color: #555; text-align: center; margin-top: 20px;">
                    Selecione um algoritmo para iniciar.
                </div>
            </div>
        </div>

        <div id="content-quest" class="hidden">
            <div class="score-board">
                <span class="score-label">PONTUAÃ‡ÃƒO</span>
                <div style="font-size: 24px; color: #ffd700;">ğŸª™ <span id="coinVal">0</span></div>
            </div>

            <div id="active-quest-box" class="hidden">
                <div class="quest-card">
                    <div class="quest-title">PERGAMINHO DE MISSÃƒO</div>
                    <div id="questText" class="quest-text">...</div>
                </div>
                <div id="questFeedback" class="feedback-box hidden"></div>
            </div>

            <div id="no-quest-msg" style="text-align:center; color:#555; margin-top:40px;">
                Clique em "Pegar Nova MissÃ£o" no menu esquerdo.
            </div>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>